# Http

1. 网路模型分层

   - 应用层 (http/ftp/smpp)

     ```
     向提供用户数服务通信活 http报文
     ```

   - 传输层 (tcp/udp)

     ```
     格式化信息流，接受端返回确认保证可靠性传输 三次握手 服务器端报文段按序号重组
     对上层数据提供传输  + tcp报头 -> tcp/udp 报文(HTTP报文)
     ```

   - 网络层(ip/icmp/arp)

     ```
     网络互联，选择传输线路。+ ip报头 -> ip数据包 (tcp 首部（http报文）)
     ```

   - 链路层

     ```
     接受数据发送/接受数据抽取ip数据包向上传递
     网络接口，硬件范畴 nic ...
     ```

2. ### 无状态协议（不保存状态，不做持久化）

   ```
   新的请求新的响应
   通过 cookie 保存状态
   请求和响应报文写入 cookie 信息控制状态
   Cookie 根据服务器端发送的响应报文 Set-Cookie 首部字段信息，通知客户端保存 co okie 下次客户端在请求服务器自动在请求报文中加入 cookie信息，服务器接收到 cookie 对比得到之前客户端的状态信息
   ```

3. ### 报文（通过请求和响应交换达成通信）

   - 请求报文

     ```
     方法（请求类型）
     URI
     协议版本
     请求首部，请求体 (可选)
     ```

   - 响应报文

     ```
     协议版本
     状态吗以及原因短语
     响应首部字段
     主体
     ```

     

4. ### 持久性链接

   ```
   只要任意一方没有明确提出断开链接就保持 tcp 链接状态
   减少重复建立和断开开销
   http1.1 都是持久化链接
   ```

5. ### 管线化（并行）

   ```
   持久性链接下的提升，不需要等待响应后在发送下一个请求
   ```

   